{# templates/appareil/show.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}{{ product.name }} - AudioTech{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .product-card {
            transition: transform 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .quantity-control {
            max-width: 150px;
        }
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .color-option.active {
            border-color: #007bff;
        }
        .color-black { background-color: #212529; }
        .color-white { background-color: #ffffff; border: 1px solid #dee2e6; }
        .color-silver { background-color: #6c757d; }
    </style>
{% endblock %}

{% block body %}
<div class="container py-5">
    <!-- Flash Messages -->
    {% for message in app.flashes('success') %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="fas fa-check-circle me-2"></i>{{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}

    <div class="row">
        <!-- Product Image -->
        <div class="col-lg-6">
            <div class="card product-card border-0 shadow-sm">
                <div class="card-body p-4">
                    <img 
                        src="{{ asset('images/Appareil.jpg') }}" 
                        class="img-fluid rounded" 
                        alt="{{ product.name }}"
                        onerror="this.onerror=null; this.src='https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=800'"
                    >
                </div>
            </div>
        </div>

        <!-- Product Details -->
        <div class="col-lg-6">
            <div class="card product-card border-0 shadow-sm">
                <div class="card-body p-4">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{{ path('app_appareil') }}">Shop</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Headphones</li>
                        </ol>
                    </nav>

                    <h1 class="h2 fw-bold mb-3">{{ product.name }}</h1>
                    
                    <div class="d-flex align-items-center mb-3">
                        <span class="h3 text-primary fw-bold">${{ product.price|number_format(2) }}</span>
                    </div>

                    <p class="text-muted mb-4">{{ product.description }}</p>

                    <!-- Features -->
                    <div class="mb-4">
                        <ul class="list-unstyled">
                            {% for feature in product.features %}
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>{{ feature }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <!-- Product Form -->
                    {% form_theme form 'bootstrap_5_layout.html.twig' %}
                    
                    {{ form_start(form, {'attr': {'id': 'cart-item-form'}}) }}
                    
                        <!-- Quantity -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Quantity</label>
                            <div class="d-flex align-items-center quantity-control">
                                <button type="button" class="btn btn-outline-secondary" onclick="updateQuantity(-1)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                {{ form_widget(form.quantity, {'attr': {'class': 'form-control text-center mx-2'}}) }}
                                <button type="button" class="btn btn-outline-secondary" onclick="updateQuantity(1)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            {{ form_errors(form.quantity) }}
                        </div>

                        <!-- Color Selection -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">Color</label>
                            <div class="d-flex mb-2">
                                {% for choice in form.color.vars.choices %}
                                    <div class="color-option color-{{ choice.value }} me-3 {% if choice.value == form.color.vars.data %}active{% endif %}"
                                         onclick="selectColor('{{ choice.value }}')"
                                         title="{{ choice.label }}">
                                    </div>
                                {% endfor %}
                            </div>
                            {{ form_widget(form.color, {'attr': {'class': 'd-none'}}) }}
                            {{ form_errors(form.color) }}
                        </div>

                       
                    
                    {{ form_end(form) }}
                    

{% endblock %}


